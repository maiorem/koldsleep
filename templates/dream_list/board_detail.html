{% extends 'base.html' %}
{% block content %}
<style>

#main {
    z-index:1;
}

#popEdit, #popDelete {
    z-index:2;
    position:absolute;
    top:0px;
    left:0px;
    width:100%;
    background-color:rgba(0,0,0,0.8);
}

.popup {
    z-index:3;
    position:fixed;
    text-align:center;
    left:20%;
    top:20%;
    width:570px;
    height:100px;
    background-color:#1C1C1E;
    border-radius: 50px;    
}

.close {
    z-index:4;
}

</style>
<div class="detail-container">
    <h3 class="dream-cdate">{{board.cdate}}</h3>
    <h1 class="dream-title">{{board.title}}</h1>
    <div class="dream-content">{{board.content|linebreaksbr}}</div>
    <div class="dream-writer">{{board.writer}}</div>
    <div class="dream-btn">
        <button class="list-btn btn-update" onclick="editPop('open');">수정</button>
        <button class="list-btn btn-delete" onclick="deletePop('open');">삭제</button>
    </div>
</div>
<div id="popEdit" style="width: 650px; height:400px;border-radius: 50px;display:none;">   
    <div class="popup" style="vertical-align:middle;">
        <input type="password" id="editpw" placeholder="비밀번호를 입력하세요">
        <br>
        <button><a href="javascript:" onclick="editPost({{board.id}});">일기 수정</a></button>
        <button><a href="javascript:" onClick="editPop('close');">
            닫기
        </a></button>
    </div>
</div>
<div id="popDelete" style="width: 650px; height:400px;border-radius: 50px;display:none;">    
    <div class="popup">
        <input type="password" id="delpw" placeholder="비밀번호를 입력하세요">
        <br>
        <button><a href="javascript:" onclick="deletePost({{board.id}});">일기 삭제</a></button>
        <button><a href="javascript:" onClick="deletePop('close');">
            닫기
        </a></button>
    <div>
</div>
{% endblock %}
{% block script %}
<script>

function editPop(type) {
    
    if(type == 'open') {
        $('#popEdit').attr('style','display:inline');
        $('#popEdit').height($(document).height());
    }
    
    else if(type == 'close') {
        $('#popEdit').attr('style','display:none');
    }

}

function deletePop(type) {
    if(type == 'open') {
        $('#popDelete').attr('style','display:inline');
        $('#popDelete').height($(document).height());
    }
    
    else if(type == 'close') {
        $('#popDelete').attr('style','display:none');
    }

}

function editPost(id) {
    if ($('#editpw').val()=="{{board.password}}") {
        var url = "{% url 'dream_list:board_update' board.id %}";
        document.location.href = url;
    } else {
        alert('비밀번호가 맞지 않습니다.');
        window.location.reload();
    }
}

function deletePost(id) {
    if ($('#delpw').val()=="{{board.password}}") {
        var url = "{% url 'dream_list:board_delete' board.id %}";
        document.location.href = url;
    } else {
        alert('비밀번호가 맞지 않습니다.');
        window.location.reload();
    }

}

$(document).ready(function(){


});
</script>
{% endblock %}
